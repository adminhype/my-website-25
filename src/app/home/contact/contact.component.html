<div class="arrow-right" >
    <img src="./images/arrow-left-diagonal.png" 
    [attr.alt]="'contact.icons.diagLeftAlt' | translate" >
</div>
<div id="contact-header" > 
    <div class="contact-title">
        <h2>{{ 'contact.title' | translate }}</h2>
    </div>
</div>
<div class="contact-content">
    <span>{{ 'contact.lead' | translate }}</span>
    <p>{{ 'contact.sublead' | translate }}</p>

        
    <form [formGroup]="form" (ngSubmit)="onSubmit()" novalidate>
        <!-- NAME -->
        <input
        type="text"
        formControlName="name"
        [placeholder]="'contact.form.name.placeholder' | translate"
        [attr.aria-label]="'contact.form.name.aria' | translate"
        [attr.aria-invalid]="f.name.invalid && (f.name.touched || submitted) ? true : null"
        [attr.aria-describedby]="f.name.invalid ? 'name-error' : null" />

        @if (f.name.touched && f.name.invalid) {
        <div class="field-error" id="name-error" aria-live="polite">
            @if (f.name.errors?.['required'])  { <small>{{ 'contact.errors.name.required'   | translate }}</small> }
            @if (f.name.errors?.['minlength']) { <small>{{ 'contact.errors.name.minlength' | translate:{ min: f.name.errors?.['minlength']?.requiredLength } }}</small> }
        </div>
        }

        <!-- EMAIL -->
        <input
        type="email"
        formControlName="email"
        [placeholder]="'contact.form.email.placeholder' | translate"
        [attr.aria-label]="'contact.form.email.aria' | translate"
        [attr.aria-invalid]="f.email.invalid && (f.email.touched || submitted) ? true : null"
        [attr.aria-describedby]="f.email.invalid ? 'email-error' : null" />

        @if (f.email.touched && f.email.invalid) {
        <div class="field-error" id="email-error" aria-live="polite">
            @if (f.email.errors?.['required']) { <small>{{ 'contact.errors.email.required' | translate }}</small> }
            @if (f.email.errors?.['email'])    { <small>{{ 'contact.errors.email.format'   | translate }}</small> }
        </div>
        }

        <!-- MESSAGE -->
        <textarea
        formControlName="message"
        [placeholder]="'contact.form.message.placeholder' | translate"
        [attr.aria-label]="'contact.form.message.aria' | translate"
        [attr.aria-invalid]="f.message.invalid && (f.message.touched || submitted) ? true : null"
        [attr.aria-describedby]="f.message.invalid ? 'message-error' : null"></textarea>

        @if (f.message.touched && f.message.invalid) {
        <div class="field-error" id="message-error" aria-live="polite">
            @if (f.message.errors?.['required'])  { <small>{{ 'contact.errors.message.required'   | translate }}</small> }
            @if (f.message.errors?.['minlength']) { <small>{{ 'contact.errors.message.minlength' | translate:{ min: f.message.errors?.['minlength']?.requiredLength } }}</small> }
        </div>
        }

        <!-- CONSENT -->
        <div class="privacy-policy">
        <input
            type="checkbox"
            id="subscribe"
            formControlName="consent"
            [attr.aria-describedby]="f.consent.invalid ? 'consent-error' : null" />
            <label>
                    {{ 'contact.form.consent.prefix' | translate }}
                    <a routerLink="/privacy-policy">{{ 'contact.form.consent.link' | translate }}</a>
                    {{ 'contact.form.consent.suffix' | translate }}
            </label>
        </div>

        @if (f.consent.touched && f.consent.invalid) {
        <div class="field-error" id="consent-error" aria-live="polite">
            <small>{{ 'contact.errors.consent.required' | translate }}</small>
        </div>
        }

        <button class="message-btn" type="submit" [disabled]="form.invalid || form.pending">
        {{ 'contact.form.submit' | translate }}
        </button>
    </form>

    <a class="arrow-top" href="#top" [attr.aria-label]="'contact.backToTopAria' | translate">
        <img src="./images/arrow-top.png" [attr.alt]="'contact.icons.topAlt' | translate">
    </a>
</div>
